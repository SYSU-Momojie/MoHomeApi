<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.cn.momojie.moquant.api.dao.MqSharePoolDao">
    <resultMap id="BaseResultMap" type="com.cn.momojie.moquant.api.dto.MqSharePool">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Fri Oct 04 15:04:31 CST 2019.
        -->
        <id column="id" jdbcType="BIGINT" property="id" />
        <result column="dt" jdbcType="VARCHAR" property="dt" />
        <result column="strategy" jdbcType="VARCHAR" property="strategy" />
        <result column="ts_code" jdbcType="VARCHAR" property="tsCode" />
    </resultMap>

    <select id="getLatestByStrategy" resultMap="BaseResultMap">
        select
            *
        from mq_share_pool
        where strategy = #{strategy}
        and dt in (select max(dt) as dt from mq_share_pool where strategy = #{strategy})
  </select>
</mapper>